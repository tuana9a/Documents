<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="https://avatars.dicebear.com/api/identicon/strategy-pattern.svg" type="image/x-icon">
    <title>Strategy Pattern</title>
</head>

<body>
    <h1>bài toán con vịt "siêu nhân", strategy pattern, design pattern</h1>

    <p>một cái app làm về con vịt, bài toán đặt ra là một con vịt có thể bay hoặc sủa <br />
        do vậy cần phải thiết kế lại class sao cho phù hợp tính kế thừa và tính mở rộng</p>

    <p>cách một là làm một class Duck (có thể abstract) có phương thức quack() <br />
        sau đó mỗi một con vịt mới thêm vào sẽ viết thêm class mới <br />
        nhưng ngay sao đó một đợt cập nhật, chủ app yêu cầu code thêm chức năng bay cho vịt <br />
        vậy phải code lại toàn bộ các con vịt (điều này càng khủng khiếp nếu sau này có nhiều vịt hơn) <br>
        một giải pháp để giải quyết bài toán trên là code chức năng bay cho root class </p>

    <p>nhưng như vậy có những con vịt không bay được lại vẫn cho bay <br />
        lại phải override các class này, mặc dù dùng tính kế thừa của OOP </p>
    <p><strong>nhưng chả thấy dễ maintain đâu, toàn tăng độ khó cho game</strong></p>

    <ul>
        <li>code bị trùng lặp ở nhiều subclass (phải override liên tục)</li>
        <li>lúc runtime khó thay đổi, phức tạp, (hard code)</li>
        <li>khi runtime khó phân biệt các con vịt với nhau (méo nhớ nó có bay được k)</li>
    </ul>

    <hr />
    <h2><b>Vậy làm sao để linh động trong việc thêm một chức năng mới cho hệ thống cũ ?</b></h2>
    <p><strong style="color: red">DESIGN PRINCIPLE:</strong></p>
    <ul>
        <li>
            <span>xác định thành phần có nhiều thay đổi nhất trong chương trình</span>
            <ul>
                <li>VD: các tính năng của con vịt <b>chứ k phải cả con vịt</b></li>
            </ul>
        </li>
        <li>tách chúng ra khỏi phần ít thay đổi của chương trình</li>
        <li>
            <span>đóng gói chúng (nhỏ nhất)</span>
            <ul>
                <li>để chỉnh sửa trong khung này</li>
                <li>các phần bên ngoài không bị ảnh hưởng</li>
            </ul>
        </li>
    </ul>
    <p>bằng cách đóng gói thầng có biến thể nhiều nhất là hành vi của con vịt (fly và quack) <br />
        <b>program to interface not implementation</b> <br />
        đại loại đây là ý nghĩa của interface: một giao diện để các thứ khác sử dụng, <br />
        (hành vi để vịt sử dụng), tạo các insterface cho các hành vi bay, quạc, và kết tập chúng vào class <b>Duck</b>
    </p>

    <hr />
    <p><strong>NHẬN XÉT</strong></p>
    <ul>
        <li>giờ lúc runtime nếu có lắp cánh tên lửa thì cũng chỉ cần set lại là được</li>
        <li>bất kì con vật nào ngoài vịt đều có thể <b>tái sử dụng</b> các hành vi trên</li>
        <li>
            có thể thêm các hành vi mới mà không bị ảnh hưởng quá nhiều
            <ul>
                <li>
                    VD: thêm hành vi mới tạo interface mới và một default hành vi cho con vịt
                    <ul>
                        <li>sửa class Duck thêm vài dòng code các con vịt khác k cần sửa</li>
                        <li>chỉ cần sửa nếu chúng có phản ứng đặc biệt thôi</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            có thể thêm các con vịt siêu nhân, vịt dời rất đơn giản
            <ul>
                <li>chỉ cần kế thừa class Duck, trong hàm khởi tạo chỉ cần set lại hành vi tương ứng</li>
            </ul>
        </li>
    </ul>
    <p>
        sau này nếu có thêm các chức năng bay quạc khác <br />
        thì cũng chỉ cần viết thêm class implement cái interface mà không cần phải sửa code class duck
    </p>

    <hr />
    <p>phía dưới là source code ví dụ</p>
    <div class="code fetchAppend" data-url="./src/headfirst/strategy/FlyBehavior.java"></div>
    <hr>
    <div class="code fetchAppend" data-url="./src/headfirst/strategy/FlyNoWay.java"></div>
    <hr>
    <div class="code fetchAppend" data-url="./src/headfirst/strategy/QuackBehavior.java"></div>
    <hr>
    <div class="code fetchAppend" data-url="./src/headfirst/strategy/MuteQuack.java"></div>
    <hr>
    <div class="code fetchAppend" data-url="./src/headfirst/strategy/Duck.java"></div>
    <hr>

    <p><strong style="color: red">DESIGN PRINCIPLE:</strong></p>
    <ul>
        <li>FAVOR <b>composition</b> OVER <b>inheritance</b></li>
    </ul>
    <script src="../../common.js"></script>
</body>

</html>